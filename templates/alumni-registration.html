{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alumni Registration Portal</title>
    <link rel="stylesheet" href="{% static 'css/style_resi.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
</head>
<body>
    <center>
        {% if messages %}
            <div class="alert">
                {% for message in messages %}
                    <p>{{ message }}</p>
                {% endfor %}
            </div>
        {% endif %}
    </center>
    <div class="contener">
        <div class="title">Alumni Registration Portal</div>
        <form method="post" action="{% url 'alumni-registration' %}">
            {% csrf_token %}
            <div class="user-details">
                <div class="input-box">
                    <span class="details"><i class="fas fa-user"></i> Full Name</span>
                    <input type="text" name="username" placeholder="Enter your full name" required>
                </div>
                <div class="input-box">
                    <span class="details"><i class="fas fa-envelope"></i> Email</span>
                    <input type="email" name="email" id="email-field" placeholder="Enter your email address" readonly required>
                </div>
                <div class="input-box">
                    <span class="details"><i class="fas fa-birthday-cake"></i> Age</span>
                    <input type="number" name="age" placeholder="Enter your age" min="18" max="100" required>
                </div>
                <div class="input-box">
                    <span class="details"><i class="fas fa-id-card"></i> College ID</span>
                    <input type="text" name="c_id" placeholder="Enter your college ID number" required>
                </div>
                <div class="input-box">
                    <span class="details"><i class="fas fa-users"></i> Batch</span>
                    <input type="text" name="batchno" placeholder="Enter your batch (e.g., 2015-2019)" required>
                </div>
                <div class="input-box">
                    <span class="details"><i class="fas fa-building"></i> Currently Connected To</span>
                    <input type="text" name="c_name" placeholder="Enter your company/organization name" required>
                </div>
                <div class="input-box">
                    <span class="details"><i class="fas fa-lock"></i> Password</span>
                    <input type="password" name="password" id="password" placeholder="Create a strong password" required>
                </div>
                <div class="input-box">
                    <span class="details"><i class="fas fa-check-circle"></i> Confirm Password</span>
                    <input type="password" name="c_password" id="confirm-password" placeholder="Confirm your password" required>
                    <div id="password-match-indicator" class="password-match-indicator"></div>
                </div>
            </div>
            
            <div class="gender-details">
                <span class="gender-title"><i class="fas fa-venus-mars"></i> Gender</span>
                <input type="hidden" name="gender" id="gender-field" value="">
                <div class="category">
                    <label for="male">
                        <input type="radio" name="gender" id="male" value="male">
                        <span class="dot one"></span>
                        <span class="gender">Male</span>
                    </label>
                    <label for="female">
                        <input type="radio" name="gender" id="female" value="female">
                        <span class="dot one"></span>
                        <span class="gender">Female</span>
                    </label>
                    <label for="prefer-not">
                        <input type="radio" name="gender" id="prefer-not" value="prefer-not-to-say">
                        <span class="dot one"></span>
                        <span class="gender">Prefer Not To Say</span>
                    </label>
                </div>
            </div>
            
            <input type="submit" value="Register">
        </form>
    </div>

    <script>
        // Get the email parameter from URL and set it in the email field
        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const emailParam = urlParams.get('email');
            
            if (emailParam) {
                document.getElementById('email-field').value = emailParam;
            }
            
            // Real-time password match validation
            const password = document.getElementById('password');
            const confirmPassword = document.getElementById('confirm-password');
            const matchIndicator = document.getElementById('password-match-indicator');
            const form = document.querySelector('form');
            
            // Check passwords on input
            confirmPassword.addEventListener('input', function() {
                if(password.value === "") {
                    matchIndicator.textContent = "";
                    matchIndicator.className = "password-match-indicator";
                } else if(password.value === confirmPassword.value) {
                    matchIndicator.textContent = "Passwords match ✓";
                    matchIndicator.className = "password-match-indicator valid";
                } else {
                    matchIndicator.textContent = "Passwords don't match ✗";
                    matchIndicator.className = "password-match-indicator";
                }
            });
            
            // Form submission validation
            form.addEventListener('submit', function(event) {
                if (password.value !== confirmPassword.value) {
                    alert("Passwords don't match!");
                    event.preventDefault();
                }
            });
        };
    </script>
</body>
</html>